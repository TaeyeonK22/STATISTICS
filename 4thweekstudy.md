# 통계학 4주차 정규과제

📌통계학 정규과제는 매주 정해진 분량의 『*데이터 분석가가 반드시 알아야 할 모든 것*』 을 읽고 학습하는 것입니다. 이번 주는 아래의 **Statistics_4th_TIL**에 나열된 분량을 읽고 `학습 목표`에 맞게 공부하시면 됩니다.

아래의 문제를 풀어보며 학습 내용을 점검하세요. 문제를 해결하는 과정에서 개념을 스스로 정리하고, 필요한 경우 추가자료와 교재를 다시 참고하여 보완하는 것이 좋습니다.

4주차는 `2부. 데이터 분석 준비하기`를 읽고 새롭게 배운 내용을 정리해주시면 됩니다.


## Statistics_4th_TIL

### 2부. 데이터 분석 준비하기
### 10. 데이터 탐색과 시각화



## Study Schedule

|주차 | 공부 범위     | 완료 여부 |
|----|----------------|----------|
|1주차| 1부 p.2~56     | ✅      |
|2주차| 1부 p.57~79    | ✅      | 
|3주차| 2부 p.82~120   | ✅      | 
|4주차| 2부 p.121~202  | ✅      | 
|5주차| 2부 p.203~254  | 🍽️      | 
|6주차| 3부 p.300~356  | 🍽️      | 
|7주차| 3부 p.357~615  | 🍽️      | 

<!-- 여기까진 그대로 둬 주세요-->

# 10. 데이터 탐색과 시각화

```
✅ 학습 목표 :
* EDA의 목적을 설명할 수 있다.
* 주어진 데이터셋에서 이상치, 누락값, 분포 등을 식별하고 EDA 결과를 바탕으로 데이터셋의 특징을 해석할 수 있다.
* 공분산과 상관계수를 활용하여 두 변수 간의 관계를 해석할 수 있다.
* 적절한 시각화 기법을 선택하여 데이터의 특성을 효과적으로 전달할 수 있다.
```
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->

## 10-1. EDA의 목적
```
EDA는 가공하지 않은 원천의 데이터를 있는 그대로 탐색하고 분석하는 기법을 뜻한다.
기술통계와 데이터 시각화를 통해 데이터의 특성을 파악하는 것이다.
```
* Garbage in, Garbage out
  * 가치가 없는 잘못된 데이터를 사용하면 역시 무가치한 결과가 나온다는 뜻.
  * 데이터 마트에 있는 raw data는 수많은 오류와 이상치를 가지고 있는 경우가 많으므로 가치 있는 데이터로 정제해 나가야 한다.

* EDA와 데이터 시각화
  * EDA와 데이터 시각화는 구분해서 생각할 필요가 있다.
  * EDA 단계에서 데이터 파악을 좀 더 효율적으로 하기 위해 시각화를 하기도 하지만, 시각화의 궁극적인 목적은 분석 결과를 커뮤니케이션하기 위함이다.

* EDA의 주요 목적
  * 데이터의 형태와 척도가 분석에 알맞게 되어있는지 확인
  * 평균, 분산, 분포, 패턴 등의 확인을 통해 데이터 특성 파악
  * 결측값이나 이상치 파악 및 보완
  * 변수 간의 관계성 파악
  * 분석 목적과 방향성 점검 및 보정

* EDA 시 고려사항
  * EDA를 할 때는 극단적인 해석, 지나친 추론, 자의적 해석을 지양해야 한다.
  * EDA 과정에서 기초통계 지식이 빛을 발한다.

## 10-2. 이상치, 누락값, 분포 등 식별 및 EDA 결과 바탕으로 데이터셋의 특징 해석

* 엑셀을 활용한 EDA
  * EDA를 하는 가장 효과적인 방법은 각 데이터 샘플을 1,000개씩 뽑아서 엑셀에 붙여 놓고 변수와 설명 리스트와 함께 쭉 살펴보는 것이다.
  * 그리고 피벗 테이블을 생성하거나 그래프를 그려서 직관적으로 데이터를 파악할 수 있다.
  * 파이썬, R, SAS 등의 데이터 가공 및 시각화 기능이 아무리 좋다 하더라도 적은 데이터를 다룰 때에는 엑셀만큼 효율적인 프로그램이 없다.
  * 다만, 엑셀은 본격적인 데이터 탐색에 들어가기 전에 심리적인 거리감을 줄여주는 정도의 보조적인 방법이라는 점을 염두에 두어야 한다.

* 탐색적 데이터 분석 실습
  * df.head( ): 데이터 샘플 확인
  * df.info( ): 각 칼럼의 속성 및 결측치 확인
    * info( )함수는 데이터에 대한 전반적인 정보를 나타낸다. 행과 열의 크기와 각 칼럼을 구성하는 값의 자료형 등을 확인할 수 있다. 이 단계에서 숫자형이어야 하는 칼럼이 문자형이거나 반대의 상황이 없는지 확인한다. **그리고 결측값이 없는지 꼭 확인해야 한다.**
  * df.describe( ): 각 칼럼의 통계치 확인
    * 숫자형 변수들은 필수적으로 기술통계적 측정을 해야한다. 다만, 숫자형이지만 문자형과 다름 없는 칼럼은 이러한 통계치에 큰 의미가 없음에 유의한다.
  * df.skew( ): 각 칼럼의 왜도 확인
    * 왜도와 첨도 역시 숫자형이지만 문자형과 다름 없는 칼럼은 감안해서 확인한다. 변숫값 분포의 정규성이 필요한 경우 로그변환, 정규화, 표준화 등의 방법을 사용한다.
  * df.kurtosis( ): 각 칼럼의 첨도 확인
  * 이후 특정 변수에 대한 분포 시각화를 통해 더 깊은 데이터 이해 과정을 수행.

## 10-3. 공분산과 상관계수 활용하여 두 변수 간 관계 해석
* 공분산과 상관성 분석의 필요성
  * 데이터 탐색 과정에서 평균, 분산, 결측치 등을 확인
  * 이후 수행하는 과정 중 하나가 변수 간의 관계 파악하는 과정
  * X와 Y간의 관계뿐만 아니라 X들 간의 관계도 살펴보아야 한다.<br> -> 다중공선성 방지 가능, 데이터 이해도 상승

* 공분산과 상관계수 분석의 기본 가정
  * 데이터가 등간, 비율척도(양적척도)
  * 두 변수가 선형적 관계

```
공분산과 상관계수는 각 변수의 변동이 얼마나 닮았는지를 표현한다는 점에서 같지만, 약간의 차이가 있다.
공분산은 서로 공유하는 분산을 나타낸다.
다만, 각 변수 간의 다른 척도기준이 그대로 반영되어 상관성의 정도를 나타내지는 못한다. 
즉, 공분산의 크기가 상관성의 강도를 의미하지 않는다.
상관계수는 이를 정규화한 값으로서, -1부터 1까지의 범위의 값을 가진다.
```

* 공분산
  * 공분산은 서로 공유하는 분산을 나타낸다.
  * 값이 0이면 두 변수는 상관관계가 없는 것이고, 양수면 양의 상관관계, 음이면 음의 상관관계를 나타낸다.

* 상관계수
  * 상관계수의 값에 따른 판단
    * 일반적인 사회과학에서 절댓값이 0.7이상일 때 상관관계가 매우 높다고 판단한다.
    * 0.4 이상이면 어느 정도 상관관계가 있다고 판단한다.
  * 주의할 점은, 기울기와 상관계수는 관련이 없다는 것이다.
  * 상관계수를 제곱한 값을 결정계수라 하는데, 총 변동 중에 회귀선에 의해 설명되는 변동이 차지하는 비율을 의미한다. 즉, 해당 독립변수가 종속변수의 변동을 설명하는 정도이다. 이는 회귀분석의 정확도를 가늠하는 중요한 기준 값이 된다.

* 상관분석의 주의사항
  * 상관분석은 두 변수의 선형관계만을 측정할 수 있기 때문에, 2차 방정식 그래프와 비슷한 모양이 될 경우 상관계수가 매우 낮게 측정될 수 있다.
  * 따라서, 상관관계가 0이더라도 변수 간의 관계를 평가할 때에는 다양한 통계적 기법과 시각화 방법을 함께 사용하여야 한다.
  * 또한, 상관분석은 이상치에 의해 크게 달라질 수 있기 때문에 기계적으로 상관분석만 하기보다는 산점도 그래프를 그려서 시각자료를 함께 확인해 보는 것이 좋다.

* 서열척도, 명목척도 간 상관관계를 분석하는 방법
  | 종류 | 척도 |
  |--------|--------|
  | Pearson correlation coefficient | 간격/비율 - 간격/비율 |
  | Spearman's rank coefficient | 서열 - 서열 |
  | Point-biserial corelation coefficient| 간격/비율-명목(2분 변수)|
  | Phi coefficient| 명목(2분 변수) - 명목(2분 변수)|
  | Carmer's coefficient| 명목 - 명목(2X2 이상)|

## 10-4. 시각화 기법 선택하여 데이터 특성 효과적 전달하기

### 시간 시각화

* 개요
  * 시점 요소가 있는 데이터는 시계열(Time series)형태로 표현할 수 있다. 
  * 이를 통해 전체적인 흐름을 알 수 있고, 데이터의 트렌드나 노이즈도 쉽게 찾아낼 수 있다.
  * 선그래프인 연속형과 막대그래프 형태인 분절형으로 구분할 수 있다.

* 연속형
  * 연속형 시간 시각화로 흔히 볼 수 있는 선그래프는 시간 간격의 밀도가 높을 때 사용한다.
  * `초 단위의 공정 센서 데이터`나 `일년 간의 일별 판매량 데이터`를 선그래프로 나타내면 효과적으로 데이터의 변화를 파악할 수 있다.
  * 하지만 데이터의 양이 너무 많거나 변동이 심하면 트렌드나 패턴을 파악하는 것이 어려울 수 있다.
  * 이러한 경우 추세선을 삽입하여 데이터 흐름을 안정된 선으로 표현할 수 있다.
    * 추세선을 그리는 가장 일반적인 방법은 이동평균 방법을 사용하는 것이다.

* 분절형
  * 분절형 시간 시각화의 경우 막대그래프, 누적 막대그래프, 점 그래프 등으로 표현한다.
    * 누적 막대그래프는 한 시점에 2개 이상의 세부 항목이 존재할 때 사용한다.
  * `1년 동안의 월 간격 단위 흐름`과 같이 시간의 밀도가 낮은 경우에 활용하기 좋은 방법이다.
  * 값들의 '상대적 차이'를 나타내는 것에 유리하다. 
---
### 비교 시각화
* 개요
  * 그룹별 차이를 나타나기 위한 비교 시각화는 데이터가 간단하면 (누적)막대그래프만으로도 충분히 표현할 수 있다. 
  * 하지만 그룹별 요소가 많아지면 보다 효율적인 기법을 사용해야 한다.

* 비교 시각화 종류
  * 히트맵 차트(Heatmap chart)는 그룹과 비교 요소가 많을 때 효과적으로 시각화를 할 수 있는 방법이다.
    * 히트맵 각각의 셀은 색상이나 채도를 통해 데이터 값의 높고 낮음을 나타낸다.
    * 차트의 각 행은 그룹에 해당하고, 열은 요소에 해당한다.
    * 히트맵 차트는 그리는 것이 까다롭기 때문에, 현재 가지고 있는 데이터의 구조와 확인하고자 하는 목적을 정확히 파악한 다음 차트를 그려야 한다.
  * 방사형 차트(Radar chart)
  * 평행 좌표 그래프(Parallel coordinates)
    * 평행 좌표 그래프를 보다 효과적으로 표현하려면 변수별 값을 정규화하면 된다. 가장 낮은 값은 0%로, 가장 높은 값은 100%로 변환하여 차이를 더욱 부각시키는 것이다.
---
### 분포 시각화
* 개요
  * 분포 시각화는 매우 단순한 시각화 방법이지만 데이터를 파악함에 있어 매우 중요하다.
  * 데이터가 처음 주어졌을 때, 변수들이 어떤 요소로 어느 정도의 비율로 구성되어 있는지를 확인하는 데 꼭 필요한 시각화 방법이다.
  * 통계치만으로 파악이 가능하긴 하지만, 분포 시각화를 통해 보다 직관적으로 데이터를 이해할 수 있다.
  * 연속형과 같은 양적 척도인지, 명목형과 같은 질적 척도인지에 따라 구분해서 그린다.

* 양적 척도에 대한 분포 시각화
  * 막대그래프, 선그래프, 히스토그램을 통해 시각화 할 수 있다.
    * 히스토그램(histogram)
      * 히스토그램은 겹치지 않는 변수의 구간을 동일하게 나눠서 구간별 도수를 막대그래프로 표현한다.
      * 각 구간을 bin이라 하며, 구간의 높이는 밀도(density), 즉 가로축의 단위 구간에 속한 값의 비율을 나타낸다.
      * 처음 그릴 때는 20개 정도의 구간으로 세세하게 나누어서 분포를 살펴본 다음, 정보의 손실이 커지지 않는 정도로 조금씩 구간의 개수를 줄여가면 된다.

* 질적 척도에 대한 분포 시각화
  * 단순한 경우: 파이차트, 도넛차트
    * 파이, 도넛차트는 전체를 100%로 하여 구성 요소들의 분포 정도를 면적(각도)으로 표현한다.
    * 시각적 표현만으로는 비율을 정확히 알기 힘들기 때문에 수치를 함께 표현해 주는 것이 좋다.
  * 복잡한 경우: 트리맵 차트, 와플 차트
    * 트리맵 차트
      * 하나의 큰 사각형을 구성 요소의 비율에 따라 작은 사각형으로 쪼개어 분포를 표현한다.
      * 장점은 사각형 안에 더 작은 사각형을 포함시켜서 위계구조를 표현할 수 있다는 점이다.
    * 와플 차트
      * 와플처럼 일정한 네모난 조각들로 분포를 표현한다.
      * 트리맵 차트처럼 위계구조를 표현하지는 못한다. 
---
### 관계 시각화
* 개요
  * 복습: 앞에서 공분산과 상관계수를 통한 산점도 시각화로 관계 시각화를 해 보았다.
  * 종류: 산점도, 버블 차트

* 산점도
  * 하나의 요소는 X축, 다른 한 요소는 Y축에 대입하여 일치하는 지점에 점을 찍어 주면 된다.
  * 산점도를 그릴 때는 극단치를 제거하고서 그리는 것이 좋다. 극단치로 인해 주요 분포 구간이 압축되어 시각화의 효율이 떨어지기 때문이다.
  * 팁으로, 데이터가 너무 많아서 점들이 서로 겹치는 경우에는, 각각의 점에 투명도를 두어 점들의 밀도를 함께 표현할 수 있도록 할 수가 있다.

* 버블 차트
  * 산점도는 두 개의 변수 간 관계만 표현할 수 있다는 단점이 있다.
  * 버블 차트를 이용하면 세 가지 요소의 상관관계를 표현할 수 있다.<br>-> 버블의 크기를 통해 한 가지 요소를 추가적으로 볼 수 있는 것이다.
  * 버블차트를 해석할 때는 원의 지름이 아닌 면적을 통해 크기를 판단하도록 주의해야 한다.
    * 지름이 두 배가 크면 실제 크기는 네 배가 큰 것이기 때문이다.
---
### 공간 시각화
* 개요
  * 데이터가 지리적 위치와 관련되어 있으면 실제 지도 위에 데이터를 표시하는 것이 효과적이다.
  * 공간 시각화는 위치 정보인 위도와 경도 데이터를 지도에 매핑하여 시각적으로 표현한다.
  * 이러한 이점을 표현하여 스토리라인을 잡고 시각화를 적용하는 것이 좋다.
  * 대표적인 기법: 도트맵, 코로플레스맵, 버블맵, 커넥션맵

* 도트맵
  * 지리적 위치에 동일한 크기의 작은 점을 찍어서 해당 지역의 데이터 분포나 패턴을 표현하는 기법이다.
  * 시각적으로 데이터의 개요를 파악하는데 유리하지만, 정확한 값을 전달하는데에는 적합하지 않다.
  * 이러한 단점을 보완하기 위해 확대해서 보면 정확한 수치를 표현하고 축소하면 점으로 표시되도록 하는 기법을 사용하기도 한다.

* 버블맵
  * 버블맵은 버블차트를 지도에 그대로 옮겨 둔 것이라고 생각하면 된다.
  * 테이블 값이 원의 크기로 표현되기 때문에 코로플레스맵보다 비율을 비교하기에는 효과적이다.
  * 다만 특정 버블이 지나치게 클 경우 다른 지역의 버블과 겹칠 수 있다는 점은 주의해야 한다.

* 코로플레스맵
  * 단계 구분도라고도 하는데, 데이터 값의 크기에 따라 색상의 음영을 달리하여 해당 지역에 대한 값을 시각화하는 기법이다.
  * 이 방법 역시 정확한 수치를 인지하고 비교하는 것이 어렵다.
  * 작은 지역들에 비해 큰 지역이 강조되는 인상을 줄 수 있기 때문에 해석할 때 이 점에 유의해야 한다.

* 커넥션맵(링크맵)
  * 지도에 찍힌 점들을 곡선 또는 직선으로 연결하여 지리적 관계를 표현한다. 뿐만 아니라 연속적 연결을 통해 지도에 경로를 표현할 수도 있다.
  * 일반적으로는 지역 간의 무역 관계나 항공 경로, 통신 정보 흐름 등을 표현할 때도 사용한다.
---
### 박스 플롯
* 개요
  * 네모 상자 모양에 최댓값과 최솟값을 나타내는 선이 결합된 모양의 데이터 시각화 모양이다.
  * 박스 플롯은 하나의 그림으로 양적 척도 데이터의 분포 및 편향성, 평균과 중앙값 등 다양한 수치를 보기 쉽게 정리해 준다.
  * 특히 두 변수의 값을 비교할 때 효과적이기 때문에 알아 두면 많은 도움이 된다.

* 박스 플롯의 다섯 가지 수치
    | 수치 | 설명|
    |---|---|
    |최솟값|제1사분위에서 1.5*IQR을 뺀 위치|
    |제1사분위(Q1)|25%의 위치|
    |제2사분위(Q2)|50%의 위치(중앙값)|
    |제3사분위(Q3)|75%의 위치|
    |최댓값|제3사분위에서 1.5*IQR을 더한 위치|
  * 각 최솟값과 최댓값의 범위를 넘어가는 값은 이상치(outlier)로서 작은 원으로 표시한다.

* 주의할 점
  * 박스 플롯을 해석할 때는 항상 데이터 분포도를 함께 떠올리는 습관이 필요하다.

<br>
<br>

# 확인 문제

## 문제 1.
> **🧚 공분산과 상관계수의 차이점에 대해 간단히 설명하세요.**

```
공분산은 부호를 통해 상관관계의 방향은 판단할 수 있지만 그 밀접한 정도는 알 수 없다.
상관계수는 이를 정규화한 측정치로서 -1부터 1까지의 값만 가지기 때문에
그 값을 통해 밀접한 정도의 판단이 가능하다.
```

## 문제 2.
> **🧚 다음 데이터 분석 목표에 적합한 시각화 방법을 보기에서 모두 골라 연결해주세요.**

> 보기: 산점도, 선그래프, 막대그래프, 히스토그램, 박스플롯

(a) 변수의 분포 확인  
(b) 두 변수 간의 관계 확인  
(c) 집단별 평균 비교  
(d) 시계열 데이터 분석  

<!--중복 가능-->

```
(a) 변수의 분포 확인 - 히스토그램, 박스플롯
(b) 두 변수 간의 관계 확인 - 산점도
(c) 집단별 평균 비교 - 박스플롯
(d) 시계열 데이터 분석 - 선그래프, 막대그래프
```


### 🎉 수고하셨습니다.